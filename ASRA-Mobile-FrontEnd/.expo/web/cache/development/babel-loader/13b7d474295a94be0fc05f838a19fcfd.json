{"ast":null,"code":"\"use strict\";\n\nvar _defineProperty = require(\"@babel/runtime/helpers/defineProperty\");\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.useAElementProps = useAElementProps;\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _useNormalizedUrl = _interopRequireDefault(require(\"../hooks/useNormalizedUrl\"));\n\nvar _DocumentMetadataProvider = require(\"../context/DocumentMetadataProvider\");\n\nvar _RenderersPropsProvider = require(\"../context/RenderersPropsProvider\");\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction useAnchorOnLinkPress(tnode, onPress) {\n  var href = tnode.attributes.href;\n  var normalizedHref = (0, _useNormalizedUrl.default)(href);\n\n  var _ref = (0, _DocumentMetadataProvider.useDocumentMetadata)(),\n      baseTarget = _ref.baseTarget;\n\n  var shouldHandleLinkPress = tnode.tagName === 'a' && typeof normalizedHref === 'string' && href.length > 0 && typeof onPress === 'function';\n  return shouldHandleLinkPress ? function (e) {\n    return onPress(e, normalizedHref, tnode.attributes, tnode.attributes.target || baseTarget);\n  } : undefined;\n}\n\nfunction useAElementProps(props) {\n  var tnode = props.tnode;\n\n  var _ref2 = (0, _RenderersPropsProvider.useRendererProps)('a'),\n      onPress = _ref2.onPress;\n\n  var syntheticAnchorOnLinkPress = useAnchorOnLinkPress(tnode, onPress);\n\n  if (typeof syntheticAnchorOnLinkPress !== 'function') {\n    return props;\n  }\n\n  return _objectSpread(_objectSpread({}, props), {}, {\n    onPress: syntheticAnchorOnLinkPress\n  });\n}\n\nvar ARenderer = function ARenderer(props) {\n  return _react.default.createElement(props.TDefaultRenderer, useAElementProps(props));\n};\n\nvar _default = ARenderer;\nexports.default = _default;","map":{"version":3,"sources":["ARenderer.tsx"],"names":["href","tnode","normalizedHref","baseTarget","shouldHandleLinkPress","e","onPress","syntheticAnchorOnLinkPress","useAnchorOnLinkPress","ARenderer","props","React","useAElementProps"],"mappings":";;;;;;;;;;;;;;AAAA,IAAA,MAAA,GAAA,sBAAA,CAAA,OAAA,CAAA,OAAA,CAAA,CAAA;;AAKA,IAAA,iBAAA,GAAA,sBAAA,CAAA,OAAA,6BAAA,CAAA;;AACA,IAAA,yBAAA,GAAA,OAAA,uCAAA;;AACA,IAAA,uBAAA,GAAA,OAAA,qCAAA;;;;;;;;AAEA,SAAA,oBAAA,CAAA,KAAA,EAAA,OAAA,EAGE;EACA,IAAMA,IAAY,GAAGC,KAAK,CAALA,UAAAA,CAArB,IAAA;EACA,IAAMC,cAAc,GAAG,CAAA,GAAA,iBAAA,CAAA,OAAA,EAAvB,IAAuB,CAAvB;;EACA,WAAuB,CAAA,GAAA,yBAAA,CAAvB,mBAAuB,GAAvB;EAAA,IAAQC,UAAR,QAAQA,UAAR;;EACA,IAAMC,qBAAqB,GACzBH,KAAK,CAALA,OAAAA,KAAAA,GAAAA,IACA,OAAA,cAAA,KADAA,QAAAA,IAEAD,IAAI,CAAJA,MAAAA,GAFAC,CAAAA,IAGA,OAAA,OAAA,KAJF,UAAA;EAKA,OAAOG,qBAAqB,GACvBC,UAAAA,CAAD;IAAA,OACEC,OAAO,CAAA,CAAA,EAAA,cAAA,EAGLL,KAAK,CAHA,UAAA,EAIJA,KAAK,CAALA,UAAAA,CAAD,MAACA,IANmB,UAEf,CADT;EAAA,CADwB,GAA5B,SAAA;AAUD;;AAEM,SAAA,gBAAA,CAAA,KAAA,EAEqB;EAC1B,IAAQA,KAAR,GAAA,KAAA,CAAQA,KAAR;;EACA,YAAoB,CAAA,GAAA,uBAAA,CAAA,gBAAA,EAApB,GAAoB,CAApB;EAAA,IAAQK,OAAR,SAAQA,OAAR;;EACA,IAAMC,0BAA0B,GAAGC,oBAAoB,CAAA,KAAA,EAAvD,OAAuD,CAAvD;;EACA,IAAI,OAAA,0BAAA,KAAJ,UAAA,EAAsD;IACpD,OAAA,KAAA;EACD;;EACD,uCAAO,KAAP;IAEEF,OAAO,EAAEC;EAFX;AAID;;AAED,IAAME,SAAgC,GAAIC,SAApCD,SAAoCC,CAAAA,KAAD,EAAW;EAClD,OAAOC,MAAAA,CAAAA,OAAAA,CAAAA,aAAAA,CAAoBD,KAAK,CAAzBC,gBAAAA,EAA4CC,gBAAgB,CAAnE,KAAmE,CAA5DD,CAAP;AADF,CAAA;;eAIeF,S","sourcesContent":["import React from 'react';\nimport { InternalMixedRenderer } from '../render/render-types';\nimport { TNode, DocumentContext } from '@native-html/transient-render-engine';\nimport { InternalRendererProps, RenderersProps } from '../shared-types';\nimport { GestureResponderEvent } from 'react-native';\nimport useNormalizedUrl from '../hooks/useNormalizedUrl';\nimport { useDocumentMetadata } from '../context/DocumentMetadataProvider';\nimport { useRendererProps } from '../context/RenderersPropsProvider';\n\nfunction useAnchorOnLinkPress(\n  tnode: TNode,\n  onPress: RenderersProps['a']['onPress']\n) {\n  const href: string = tnode.attributes.href;\n  const normalizedHref = useNormalizedUrl(href);\n  const { baseTarget } = useDocumentMetadata();\n  const shouldHandleLinkPress =\n    tnode.tagName === 'a' &&\n    typeof normalizedHref === 'string' &&\n    href.length > 0 &&\n    typeof onPress === 'function';\n  return shouldHandleLinkPress\n    ? (e: GestureResponderEvent) =>\n        onPress!(\n          e,\n          normalizedHref,\n          tnode.attributes,\n          (tnode.attributes.target as DocumentContext['baseTarget']) ||\n            baseTarget\n        )\n    : undefined;\n}\n\nexport function useAElementProps<T extends TNode>(\n  props: InternalRendererProps<T>\n): InternalRendererProps<T> {\n  const { tnode } = props;\n  const { onPress } = useRendererProps('a');\n  const syntheticAnchorOnLinkPress = useAnchorOnLinkPress(tnode, onPress);\n  if (typeof syntheticAnchorOnLinkPress !== 'function') {\n    return props;\n  }\n  return {\n    ...props,\n    onPress: syntheticAnchorOnLinkPress\n  };\n}\n\nconst ARenderer: InternalMixedRenderer = (props) => {\n  return React.createElement(props.TDefaultRenderer, useAElementProps(props));\n};\n\nexport default ARenderer;\n"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.getIMGState = getIMGState;\n\nvar _extractImageStyleProps = _interopRequireDefault(require(\"./extractImageStyleProps\"));\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : {\n    default: obj\n  };\n}\n\nfunction getIMGState(_ref) {\n  var error = _ref.error,\n      alt = _ref.alt,\n      altColor = _ref.altColor,\n      source = _ref.source,\n      containerStyle = _ref.containerStyle,\n      concreteDimensions = _ref.concreteDimensions,\n      initialDimensions = _ref.initialDimensions,\n      objectFit = _ref.objectFit,\n      onError = _ref.onError;\n\n  if (error) {\n    return {\n      type: 'error',\n      alt: alt,\n      altColor: altColor,\n      source: source,\n      error: error,\n      containerStyle: containerStyle,\n      dimensions: concreteDimensions !== null && concreteDimensions !== void 0 ? concreteDimensions : initialDimensions\n    };\n  }\n\n  if (concreteDimensions != null) {\n    return {\n      type: 'success',\n      alt: alt,\n      altColor: altColor,\n      source: source,\n      onError: onError,\n      containerStyle: containerStyle,\n      imageStyle: (0, _extractImageStyleProps.default)(containerStyle, objectFit),\n      dimensions: concreteDimensions\n    };\n  }\n\n  return {\n    type: 'loading',\n    alt: alt,\n    altColor: altColor,\n    source: source,\n    containerStyle: containerStyle,\n    dimensions: initialDimensions\n  };\n}","map":{"version":3,"sources":["getIMGState.ts"],"names":["onError","type","alt","altColor","source","error","containerStyle","dimensions","concreteDimensions","initialDimensions","imageStyle"],"mappings":";;;;;;;AAQA,IAAA,uBAAA,GAAA,sBAAA,CAAA,OAAA,4BAAA,CAAA;;;;;;;;AAiBO,SAAA,WAAA,OAUiC;EAAA,IAVZ,KAUY,QAVZ,KAUY;EAAA,IAVZ,GAUY,QAVZ,GAUY;EAAA,IAVZ,QAUY,QAVZ,QAUY;EAAA,IAVZ,MAUY,QAVZ,MAUY;EAAA,IAVZ,cAUY,QAVZ,cAUY;EAAA,IAVZ,kBAUY,QAVZ,kBAUY;EAAA,IAVZ,iBAUY,QAVZ,iBAUY;EAAA,IAVZ,SAUY,QAVZ,SAUY;EAAA,IADtCA,OACsC,QADtCA,OACsC;;EACtC,IAAA,KAAA,EAAW;IACT,OAAO;MACLC,IAAI,EADC,OAAA;MAELC,GAFK,EAELA,GAFK;MAGLC,QAHK,EAGLA,QAHK;MAILC,MAJK,EAILA,MAJK;MAKLC,KALK,EAKLA,KALK;MAMLC,cANK,EAMLA,cANK;MAOLC,UAAU,EAAEC,kBAAF,KAAA,IAAEA,IAAAA,kBAAF,KAAA,KAAA,CAAEA,GAAF,kBAAEA,GAAsBC;IAP7B,CAAP;EASD;;EACD,IAAID,kBAAkB,IAAtB,IAAA,EAAgC;IAC9B,OAAO;MACLP,IAAI,EADC,SAAA;MAELC,GAFK,EAELA,GAFK;MAGLC,QAHK,EAGLA,QAHK;MAILC,MAJK,EAILA,MAJK;MAKLJ,OALK,EAKLA,OALK;MAMLM,cANK,EAMLA,cANK;MAOLI,UAAU,EAAE,CAAA,GAAA,uBAAA,CAAA,OAAA,EAAA,cAAA,EAPP,SAOO,CAPP;MAQLH,UAAU,EAAEC;IARP,CAAP;EAUD;;EACD,OAAO;IACLP,IAAI,EADC,SAAA;IAELC,GAFK,EAELA,GAFK;IAGLC,QAHK,EAGLA,QAHK;IAILC,MAJK,EAILA,MAJK;IAKLE,cALK,EAKLA,cALK;IAMLC,UAAU,EAAEE;EANP,CAAP;AAQD","sourcesContent":["import type {\n  UseIMGElementStateProps,\n  IMGElementState,\n  IMGElementStateBase,\n  IMGElementStateError,\n  IMGElementStateSuccess,\n  IMGElementStateLoading\n} from './img-types';\nimport extractImageStyleProps from './extractImageStyleProps';\nimport { ImageDimensions } from '../shared-types';\n\ninterface GetStateProps<C> extends Omit<IMGElementStateBase, 'dimensions'> {\n  concreteDimensions: C;\n  error: Error | null;\n  initialDimensions: ImageDimensions;\n  objectFit: UseIMGElementStateProps['objectFit'];\n  onError?: (e: Error) => void;\n}\n\nexport function getIMGState(\n  props: GetStateProps<ImageDimensions>\n): IMGElementStateError | IMGElementStateSuccess;\nexport function getIMGState(\n  props: GetStateProps<null | ImageDimensions>\n): IMGElementState;\nexport function getIMGState({\n  error,\n  alt,\n  altColor,\n  source,\n  containerStyle,\n  concreteDimensions,\n  initialDimensions,\n  objectFit,\n  onError\n}: GetStateProps<any>): IMGElementState {\n  if (error) {\n    return {\n      type: 'error',\n      alt,\n      altColor,\n      source,\n      error,\n      containerStyle,\n      dimensions: concreteDimensions ?? initialDimensions\n    };\n  }\n  if (concreteDimensions != null) {\n    return {\n      type: 'success',\n      alt,\n      altColor,\n      source,\n      onError,\n      containerStyle,\n      imageStyle: extractImageStyleProps(containerStyle, objectFit),\n      dimensions: concreteDimensions\n    } as IMGElementStateSuccess;\n  }\n  return {\n    type: 'loading',\n    alt,\n    altColor,\n    source,\n    containerStyle,\n    dimensions: initialDimensions\n  } as IMGElementStateLoading;\n}\n"]},"metadata":{},"sourceType":"script"}